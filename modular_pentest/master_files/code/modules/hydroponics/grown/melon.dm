/obj/item/reagent_containers/food/snacks/grown/holymelon/Initialize()
	. = ..()
	var/uses = 1
	if(seed)
		uses = round(seed.potency / 20)
	AddComponent(/datum/component/anti_magic, TRUE, TRUE, FALSE, ITEM_SLOT_HANDS, uses, TRUE, CALLBACK(src, PROC_REF(block_magic)), CALLBACK(src, PROC_REF(expire))) //deliver us from evil o melon god

/obj/item/reagent_containers/food/snacks/grown/holymelon/proc/block_magic(mob/user, major)
	if(major)
		to_chat(user, span_notice("[src] hums slightly, and seems to decay a bit."))

/obj/item/reagent_containers/food/snacks/grown/holymelon/proc/expire(mob/user)
	to_chat(user, span_notice("[src] rapidly turns into ash!"))
	qdel(src)
	new /obj/effect/decal/cleanable/ash(drop_location())

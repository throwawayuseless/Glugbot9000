// MOUNTED SHOTGUN //

#define MANUFACTURER_QUIN "the Quin Technologies logo"

/obj/item/gun/ballistic/shotgun/mounted // The gun itself before being mounted
	name = "mounted shotgun"
	desc = "You've always dreamt of replacing your arm with a shotgun. Now you can."
	icon = 'modular_pentest/modules/mounted_shotgun/icons/mounted_shotgun.dmi'
	icon_state = "mounted_shotgun"
	item_state = "unmounted"
	mob_overlay_icon = "mounted_shotgun"
	lefthand_file = 'modular_pentest/modules/mounted_shotgun/icons/mounted_shotgun_lefthand.dmi'
	righthand_file = 'modular_pentest/modules/mounted_shotgun/icons/mounted_shotgun_righthand.dmi'
	manufacturer = MANUFACTURER_QUIN

/obj/item/gun/ballistic/shotgun/mounted/no_mag
	default_ammo_type = FALSE

/obj/item/gun/ballistic/shotgun/mounted/on // This is the gun when attached
	w_class = WEAPON_LIGHT
	recoil_unwielded = 2
	item_flags = ABSTRACT | DROPDEL
	item_state = "mounted"
	lefthand_file = 'modular_pentest/modules/mounted_shotgun/icons/mounted_shotgun_lefthand.dmi'
	righthand_file = 'modular_pentest/modules/mounted_shotgun/icons/mounted_shotgun_righthand.dmi'

/obj/item/gun/ballistic/shotgun/mounted/on/Initialize()
	. = ..()
	ADD_TRAIT(src, TRAIT_NODROP, HAND_REPLACEMENT_TRAIT)

/obj/item/gun/ballistic/shotgun/mounted/on/dropped()
	. = ..()
	new /obj/item/gun/ballistic/shotgun/mounted(get_turf(src))
	qdel(src)
	return

// Gun case

/obj/item/storage/guncase/mounted_shotgun
/obj/item/storage/guncase/mounted_shotgun/PopulateContents()
	new /obj/item/gun/ballistic/shotgun/mounted/no_mag(src)

// Gun crate

/datum/supply_pack/gun/mounted_shotgun
	name = "Mounted Shotgun Crate"
	desc = "For when you need to deal with hooligans in your sleep. Contains a shotgun to replace your arm."
	cost = 2000
	contains = list(/obj/item/storage/guncase/mounted_shotgun)
	crate_name = "shotgun crate"

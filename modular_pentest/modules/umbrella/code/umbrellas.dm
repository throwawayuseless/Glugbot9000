/*
 * # Umbrellas!
 * This file has code for umbrellas!
 * Umbrellas you can hold, and open and close.
 * Currently not coding for protecting against rain. This is just visuals.
 */
/obj/item/umbrella
	name = "umbrella"
	desc = "A plain umbrella."

	icon = 'modular_pentest/modules/umbrella/icons/umbrellas.dmi'
	icon_state = "umbrella"

	lefthand_file = 'modular_pentest/modules/umbrella/icons/umbrellas_inhand_lh.dmi'
	righthand_file = 'modular_pentest/modules/umbrella/icons/umbrellas_inhand_rh.dmi'

	force = 5
	throwforce = 5
	w_class = WEIGHT_CLASS_SMALL
	attack_verb = list("bludgeon", "whack", "discipline", "pummel")

	hitsound = 'sound/weapons/genhit1.ogg'
	sharpness = IS_BLUNT

	/// The sound effect played when our umbrella is opened
	var/on_sound = 'sound/weapons/batonextend.ogg'
	/// The inhand icon state used when our umbrella is opened.
	var/on_inhand_icon_state = "umbrella_on"
	/// The inhand icon state used when our umbrella is closed.
	var/inhand_icon_state = "umbrella_closed"

/obj/item/umbrella/Initialize(mapload)
	. = ..()
	AddComponent( \
		/datum/component/transforming, \
		force_on = 7, \
		w_class_on = WEIGHT_CLASS_BULKY, \
		attack_verb_on = list("swoosh", "whack", "fwump"), \
		hitsound_on = 'sound/weapons/fwoosh.ogg',\
	)

/obj/item/umbrella/proc/on_transform(obj/item/source, mob/user, active)
	SIGNAL_HANDLER
	inhand_icon_state = active ? on_inhand_icon_state : inhand_icon_state
	if(user)
		balloon_alert(user, active ? "opened" : "closed")
	playsound(src, on_sound, 50, TRUE)
	return COMPONENT_NO_DEFAULT_MESSAGE

//other umbrellas
/obj/item/umbrella/parasol
	name = "parasol"
	desc = "A black laced parasol, how intricate."
	icon_state = "parasol"
	on_inhand_icon_state = "parasol_on"
